<mat-tab-group dynamicHeight mat-align-tabs="center" class="hello">
  <mat-tab label="Presentation" > 
    <div class="formation" >
     <h2>Fromation</h2>

          <div class="form-group row"> 
            <div class="col-sm-6">
              <label style="color: #999;" class="col-lg-5 col-form-label form-control-label" id="attribbuts">Nom de Formation : </label>
              {{data.formation.nom}}
            </div>     
            <div class="col-sm-6">
              <label style="color: #999;" class="col-lg-5 col-form-label form-control-label" id="attribbuts">Nom de Formateur :</label>
              {{data.formation.formateur.prenom}} {{data.formation.formateur.nom}}
            </div>
          </div>

          <div class="form-group row"> 
            <div class="col-sm-6">
              <label style="color: #999;" class="col-lg-5 col-form-label form-control-label" id="attribbuts">Date : </label>
              {{data.formation.date | date}}
            </div>     
            <div class="col-sm-6">
              <label style="color: #999;" class="col-lg-5 col-form-label form-control-label" id="attribbuts">Etablissement :</label>
              {{data.formation.accueil}}
            </div>
          </div>

          <div class="form-group row"> 
            <div class="col-sm-6">
              <label style="color: #999;" class="col-lg-5 col-form-label form-control-label" id="attribbuts">Prix Total : </label>
              {{data.formation.prix}} MAD
            </div>
            <div class="col-sm-6">
              <label style="color: #999;" class="col-lg-5 col-form-label form-control-label" id="attribbuts">Nombre de places :</label>
              {{data.formation.nombres_places}}
            </div>
          </div>

          <div class="form-group row"> 
            <div class="col-sm-12">
              <label style="color: #999;" class="col-lg-5 col-form-label form-control-label" id="attribbuts">Objectifs : </label>
              {{data.formation.objectifs}}
            </div>
          </div>

          <div class="form-group row"> 
            <div class="col-sm-12">
              <label style="color: #999;" class="col-lg-5 col-form-label form-control-label" id="attribbuts">Prérequis : </label>
              {{data.formation.prerequis}}
            </div>
          </div>

          <div class="form-group row"> 
            <div class="col-sm-12">
              <label style="color: #999;" class="col-lg-5 col-form-label form-control-label" id="attribbuts">Description : </label>
              {{data.formation.description}}
            </div>
          </div>

        
      <hr>
      <div class="d-flex justify-content-center">
        <button class="btn btn-secondary" style="margin-right: 5px; width: 100px ;"  mat-dialog-close>Annuler</button>      
      </div>
    </div>
  </mat-tab>
  
  <mat-tab label="Plan">
    <div class="container" style="margin-top: 30px;" >
      <div class="row">
          <div class="col-sm-5"> 
              <h2 >Plan</h2>
          </div>
      </div>
      
<!-- Elements de plan  -->


<mat-accordion>
  <mat-expansion-panel *ngFor="let element of elements">
    <mat-expansion-panel-header>
      <mat-panel-title>
        <mat-checkbox (click)="$event.stopPropagation();" 
        (keydown)="$event.stopPropagation()" (change)="OnChange($event,element)">{{element.element.nom}}</mat-checkbox>
      </mat-panel-title>
      <mat-panel-description>
        Score : {{element.element.score}} /100
      </mat-panel-description>
    </mat-expansion-panel-header>

    <div class="form-group row"> 
      <div class="col-sm-6">
        <label style="color: #999;" class="col-lg-5 col-form-label form-control-label" id="attribbuts">Date : </label>
        {{element.element.date | date}}
      </div>     
      <div class="col-sm-6">
        <label style="color: #999;" class="col-lg-5 col-form-label form-control-label" id="attribbuts">Temps :</label>
        {{element.element.temps}} min
      </div>
    </div>

    <div class="form-group row"> 
      <div class="col-sm-6">
        <label style="color: #999;" class="col-lg-5 col-form-label form-control-label" id="attribbuts">Prix : </label>
        {{element.element.prix}} MAD
      </div>     
      <div class="col-sm-6">
        <label style="color: #999;" class="col-lg-5 col-form-label form-control-label" id="attribbuts">Nombre de places restantes :</label>
        {{element.element.nbDePlacesRestantes}}
      </div>
    </div>

    <div class="form-group row"> 
      <div class="col-sm-12">
        <label style="color: #999;" class="col-lg-5 col-form-label form-control-label" id="attribbuts">Objectif : </label>
        {{element.element.objectif}}
      </div>
    </div>

    <div class="form-group row"> 
      <div class="col-sm-12">
        <label style="color: #999;" class="col-lg-5 col-form-label form-control-label" id="attribbuts">Prérequis : </label>
        {{element.element.prerequis}}
      </div>
    </div>

    <div class="form-group row"> 
      <div class="col-sm-12">
        <label style="color: #999;" class="col-lg-5 col-form-label form-control-label" id="attribbuts">Description : </label>
        {{element.element.description}}
      </div>
    </div>

    <label style="color: #999;" class="col-lg-5 col-form-label form-control-label" id="attribbuts">Inscrits : </label>

    <table mat-table [dataSource]="element.inscrits" class="mat-elevation-z8">

      
      <ng-container matColumnDef="Nom">
        <th mat-header-cell *matHeaderCellDef> Nom </th>
        <td mat-cell *matCellDef="let inscrit"> {{inscrit.beneficiaire.prenom}} {{inscrit.beneficiaire.nom}}</td>
      </ng-container>
    
      
      <ng-container matColumnDef="Email">
        <th mat-header-cell *matHeaderCellDef> Email </th>
        <td mat-cell *matCellDef="let inscrit"> {{inscrit.email}} </td>
      </ng-container>
    
      
      <ng-container matColumnDef="Téléphone">
        <th mat-header-cell *matHeaderCellDef> Téléphone </th>
        <td mat-cell *matCellDef="let inscrit"> {{inscrit.phone}} </td>
      </ng-container>
    
      
      <ng-container matColumnDef="Adresse">
        <th mat-header-cell *matHeaderCellDef> Adresse </th>
        <td mat-cell *matCellDef="let inscrit"> {{inscrit.localisation}} </td>
      </ng-container>
    
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>


  </mat-expansion-panel>
</mat-accordion>

    <div class=" row" style="margin-top: 30px;">
      <div class="col-sm-12 col-xl">
        <h3 >Prix total : {{prix_total}}   MAD</h3>
      </div>
  </div>



      <div class="d-flex justify-content-center">
        <button class="btn btn-secondary" style="margin-right: 5px; width: 100px ;"  mat-dialog-close>Annuler</button>
        <button mat-button (click)="inscrire_button_clicked=true"  class="btn btn-success"  style="background-color: #3a5199; border: #3a5199; width: 100px;">S'inscrire</button>   
    </div>

    </div>

    <div *ngIf="inscrire_button_clicked" style="margin-top: 30px;">
      <form [formGroup]="inscriptionFormGroup">
            <div>
                <mat-form-field style="width: 100%;">
                    <mat-label >Email</mat-label>
                    <input matInput formControlName="email" required>
                </mat-form-field>
            </div>
            <div > 
                <mat-form-field style="width: 100%;">
                    <mat-label>Téléphone</mat-label>
                    <input matInput formControlName="tel" required>
                </mat-form-field>
            </div>
            <div > 
              <mat-form-field style="width: 100%;">
                  <mat-label>Adresse</mat-label>
                  <input matInput formControlName="adresse" required>
              </mat-form-field>

              <!--<agm-map 
                [latitude]="latitude" 
                [longitude]="longitude" 
                [zoom]="zoom" >
                <agm-marker 
                  [latitude]="latitude" 
                  [longitude]="longitude"
                  [markerDraggable]="true"
                  (dragEnd)="markerDragEnd($event)"></agm-marker>
              </agm-map>-->

          </div>
          <!--<div>Latitude: {{latitude}}</div>
  <div>Longitude: {{longitude}}</div>-->
            <div class="d-flex justify-content-center" style="margin-top: 30px;">
                <button (click)="annuler_inscription()" class="btn btn-secondary" style="margin-right: 5px; width: 100px ;"  >Annuler</button>
                <button mat-button (click)="inscrire()" class="btn btn-success"  style="background-color: #3a5199; border: #3a5199; width: 100px;">Valider</button>
                 
            </div>
    </form>
</div>
  </mat-tab>
</mat-tab-group>